# 💻 Dev environment
### 'local.dev.in' - for dev packages

Manually enter here the things you need for dev environment

    pip-chill > .\backend\requirements\local.dev.in


# 🚀 Prod files

### pyproject.toml - this is list of packages that must be used in prod (only valid ones, no shitty packages)
Firstly, it is created manually with following structure:

(Actually it always gets edited manually as far as I understand for now.)

    # pyproject.toml
    [project]
    name = "temp-seed"
    version = "0.1.0"
    requires-python = ">=3.12"
    dependencies = [
    "Django>=5.1,<5.2",
    "psycopg2-binary>=2.9,<3.0",
    ]

Then we have to compile it to backend\requirements\template.txt via *pip-tools*.
The result file is the concrete fucking version of the requirements that is goddamn stable and can be changed iff you have real reasons for that.
Hashed for each package are generated as well - for safety.

    pip-compile backend\pyproject.toml --generate-hashes -o backend\requirements\template.txt

# ⚔️ WORKFLOW

0. BE SURE that you have generated following files for dev and prod:

    (and of course be sure that you have installed *pip-tools* and *pip chill* in your venv)

        template.txt
        local.dev.in

1. To be sure that we don't fuck up with the template.txt (which must only be generated by pip-compile) we copy it and name as 'constraints.txt' and use further.

        copy .\backend\requirements\template.txt .\backend\requirements\constraints.txt


2. Now need to combine dev and prod together to be able to to our job. For that we promtp to cmd:

        pip-compile backend\requirements\local.dev.in ` # our dev packages we have defined
        -o backend\requirements\local.dev.txt ` # output file path
        -c backend\requirements\constraints.txt # our prod packages we take as constraints

3. Finally - we can install everything to our venv and start the development.

        pip install --require-hashes -r backend\requirements\template.txt
        pip install -r backend\requirements\local.dev.txt -c backend\requirements\constraints.txt

